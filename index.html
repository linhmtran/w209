<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css">
	<title>California Traffic Collisions Visualization</title>
</head>
<body class="bg">
	<h1>California Traffic Collisions - 2017</h1>
	<p>As unfortunate as it may be, traffic collisions are an inevitable occurence in the world of commuting and California is in no short supply of commuters or car collisions.  These visualizations help us explore different facets of traffic collisions within the state of California.  The dataset was taken from all vehicle collisions reported to CHP and other law enforcement agencies for the entire year of 2017.  Dive in and explore the data for your region.
	<div style="overflow: auto;" id="dash1_where">
		<h2>Where are you driving?</h2>
		<div style="width: 600px; float: left;" id="map_context">
			<p>Location bears an impact to traffic collisions numbers, and can potentially affect the odds of your involvment in a traffic collision.</p>
			<p>The map visualization allows you not only locate your region of driving, but it also provides some insights into collision numbers, providing data on raw number of collisions as well as number of collisions per 10,000 population.  Each county is colored: darker the shade, the higher number of collisions there are relative to other counties in the state.  Use the <strong>radio buttons</strong> to change the view to display the number of collisions per 10,000 population.</p>
			<p>Some interesting takeaways:</p>
			<li>Los Angeles has by far the highest number of traffic collisions.</li>
			<li>Alpine county has the highest number of collisions per 10,000 population.</li>
			<p>This makes some sense if you know the areas.  Los Angeles has a huge population and strong <i>car culture</i>. Known for densely populated area, an impressive highway system, and many commuters, the sheer number of drivers alongside you raises the potential for a traffic collision.  However, with respect to its population size, its collision rate is not far off from other counties in the state.</p>
			<p>Alpine county on the other hand, is a rather remote region near Lake Tahoe, it is someone secluded, with rugged terrain, mountains and weather factors.  Many travelers will <i>road trip</i> through this area.  It makes sense sense they have a very low number of collisions, but due to travlers, they have a high number of collisions for their population size.</p>
			<p>Use the map visualization to explore at a high level the number and rate of traffic collisions for your county or others.  This information will cross filter the other visualizations so you can learn about different areas in further detail.  What do you find interesting in your region?</p>
		</div>
		<div style="float: left;" id="maptype">
				<input type="radio" id="r1" name="maptype" class="radioButton" value="Number of Collisions" checked/> Number of Collisions
				<input type="radio" id="r2" name="maptype" class="radioButton" value="Collisions per Capita"/> Collisions per 10,000 Population
				<!-- <input type="button" id="b1" name="resetCounty" class="resetButton" value="Reset County Selection" onclick="mapInfoUpdate()"/> -->
				<input type="button" id="b1" name="resetCounty" class="resetButton" value="Reset County Selection"/>
			<div id="map"></div>
		</div>
	</div>

	<div style="overflow: auto;" id="dash2_when">
		<h2>When are you on the road?</h2>
		<div id="time_context">
			<p>When you are on the road also influence your propensity for being involved in a traffic collision.  During rush-hour times, more cars are on the road competeing for space and time in some instances which can lead to tumultous and unfortunate situations. Being aware of these conditions can help you as a driver!</p>
			<p>Traffic and collisions patterns share common traits throughout the week, but its also interesting to see how different days of the week differ.  For instance, Friday evenings tend to have a greater number of collisions, so there's another incentive to beat rush hour!</p>
		</div>
		<div id="heatmap"></div>
	</div>

	<div style="overflow: auto;" id="dash3_what">
		<h2>What are the factors?</h2>
		<div style="width: 600px; float: left;" id="what_context">
			<p>Traffic collisions occur for a breadth of reasons with many factors and outcomes.</p>
			<p>The first graph here displays the number of categorized collision factors reported to the CHP.  Click on one and it will cross filter into the second display showing you injury and fatality rates for that type of accident.</p>

			<p>A majority of collisions only result in property damge, however, there are always cases that also result in injury or worse fatality.  Explore some of the causes of collisions in your county, and what proportion of them result in injury or deaths.  Understanding these factors can help inform you what to search in your surroundings and what you can do on your part to be a safer driver.</p>
			<p>Based on your location selection, the bar chart which update with detail the number of collisions for each CHP Primary Collision Factor violation category.  This can be speeding, brake failures, driving under the influence (DUI). Although, many counties seem to share a consistent pattern of violations: speeding is almost always a clear winner!</p>
			<p>Please note the changing scale based on the county selection.  Naturally, smaller populous regions have few collisions on records. Take a moment to explore your region and others!  See what violaions are most prevalent in your area and discover things you should be wary of to help become a safer driver.</p>
		</div>
		<div style="float: left;" id="pcf_graph"></div>
		<div style="float: center;" id="risk_chart"></div>
	</div>

<script src="js/d3.v4.js"></script>
<script src="js/d3-legend.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js"></script>

<!-- script for risk chart, declare first since triggered by PCF actions -->
<script src="js/risk_bar_chart.js"></script>

<!-- PCF bar graph, declare first since triggered by county map actions -->
<script src="js/pcf_graph.js"></script>

<!-- scripts to support counties map -->
<script src="js/california-counties.js"></script>
<script src="js/counties_map.js"></script>

<!-- scripts for Date Time Heat Map Chart -->
<script src="https://d3js.org/d3-scale-chromatic.v0.3.min.js"></script>
<script src="js/date_time_chart.js"></script>


</body>
</html>
